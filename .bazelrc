# generic_clang from @llvm-raw//utils/bazel, but c++17 to match Google
build:generic_clang --repo_env=CC=clang
build:generic_clang --cxxopt=-std=c++17 --host_cxxopt=-std=c++17
build:generic_clang --copt=-Wall --copt=-Werror --host_copt=-Wall --host_copt=-Werror
build:generic_clang --cxxopt=-Wno-range-loop-analysis --host_cxxopt=-Wno-range-loop-analysis
build:generic_clang --copt=-Wno-deprecated --host_copt=-Wno-deprecated

# enable linking against prebuilt LLVM with no RTTI
build:generic_clang --copt=-fno-rtti --host_copt=-fno-rtti

# new warning in LLVM 15, fires when building LLVM 14.0.0
# ref: https://github.com/llvm/llvm-project/commit/48285c20
build:generic_clang --copt=-Wno-unused-but-set-variable --host_copt=-Wno-unused-but-set-variable

build --config=generic_clang
build --sandbox_base=/dev/shm
